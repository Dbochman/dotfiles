#!/bin/bash

export HOME="/Users/dbochman"

# Load 1Password service account token from local file (not in repo)
if [[ -f "$HOME/.openclaw/.env-token" ]]; then
  export OP_SERVICE_ACCOUNT_TOKEN=$(cat "$HOME/.openclaw/.env-token")
fi

# Fetch API keys from 1Password via service account
if command -v /opt/homebrew/bin/op &>/dev/null; then
  export OPENAI_API_KEY=$(/opt/homebrew/bin/op read "op://OpenClaw/OpenAI API Key/password" 2>/dev/null)
  export ELEVENLABS_API_KEY=$(/opt/homebrew/bin/op read "op://OpenClaw/ElevenLabs API Key/password" 2>/dev/null)
  export OPENCLAW_GATEWAY_TOKEN=$(/opt/homebrew/bin/op read "op://OpenClaw/OpenClaw Gateway Token/password" 2>/dev/null)
fi

/opt/homebrew/Cellar/node@22/22.22.0/bin/node /opt/homebrew/lib/node_modules/openclaw/dist/index.js gateway --port 18789
